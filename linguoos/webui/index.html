<!doctype html><meta charset="utf-8"><title>LinguoOS UI</title>
<button id="ctx">Context</button>
<button id="decide">Decision</button>
<button id="get">Practice·Get</button>
<button id="submitWrong">Practice·Submit Wrong</button>
<button id="btnStatus">System Status</button>
<button id="btnMetrics">System Metrics</button>
<button id="btnEvents">System Events</button>
<button id="btnHist">History (recent)</button>
<button id="btnHistClear">History · Clear</button>
<pre id="out">Ready.</pre>
<script>
const out = document.getElementById('out');
const show = (t,d)=> out.textContent = t + "\n\n" + JSON.stringify(d,null,2);
const gj = p => fetch(p).then(r=>r.json());
const pj = (p,b)=> fetch(p,{method:"POST",headers:{'Content-Type':'application/json'},body:JSON.stringify(b)}).then(r=>r.json());
const moduleId = "precision.generalization";
document.getElementById('ctx').onclick = ()=> gj('/api/v1/workspace/context').then(d=>show('Context',d));
document.getElementById('decide').onclick = ()=> pj('/api/v1/decision/next',{user_id:'demo',module_id:moduleId,last_mode:null,last_correct:null}).then(d=>show('Decision',d));
document.getElementById('get').onclick = ()=> gj('/api/v1/practice/next?module_id='+encodeURIComponent(moduleId)).then(d=>show('Practice·Get',d));
document.getElementById('submitWrong').onclick = ()=> pj('/api/v1/practice/submit',{user_id:'demo',input_type:'text',payload:{content:'Students often learn much faster.'},client_context:{client_type:'web',workspace_mode:'practice',timestamp:1730000000}}).then(d=>show('Practice·Submit Wrong',d));
document.getElementById("btnStatus").onclick = async ()=>{
  const r = await fetch("/api/v1/system/status");
  out.textContent = "System Status\n\n"+JSON.stringify(await r.json(),null,2);
};
document.getElementById("btnMetrics").onclick = async ()=>{
  const r = await fetch("/api/v1/system/metrics");
  out.textContent = "System Metrics\n\n"+JSON.stringify(await r.json(),null,2);
};
document.getElementById("btnEvents").onclick = async ()=>{
  const r = await fetch("/api/v1/system/events?limit=25");
  out.textContent = "System Events\n\n"+JSON.stringify(await r.json(),null,2);
};
document.getElementById("btnHist").onclick = async ()=>{
  const r = await fetch("/api/v1/history/recent");
  out.textContent = "History (recent)\n\n"+JSON.stringify(await r.json(),null,2);
};
document.getElementById("btnHistClear").onclick = async ()=>{
  const r = await fetch("/api/v1/history/clear",{method:"DELETE"});
  out.textContent = "History cleared\n\n"+JSON.stringify(await r.json(),null,2);
};
</script>
